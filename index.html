<!doctype html>
<html lang="zh-CN" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>CF Pages Console</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      /* æ·±è‰²æ¨¡å¼å˜é‡ (é»˜è®¤) */
      --bg-body: #000000;
      --bg-gradient: radial-gradient(circle at 50% 0%, #2a2a2a 0%, #000000 100%);
      --glass-base: rgba(28, 28, 30, 0.65);
      --glass-border: rgba(255, 255, 255, 0.12);
      --input-bg: rgba(255, 255, 255, 0.08);
      --text-primary: #FFFFFF;
      --text-secondary: rgba(235, 235, 245, 0.6);
      --accent-color: #0A84FF;
      --danger-color: #FF453A;
      --success-color: #32D74B;
      --card-shadow: 0 8px 40px rgba(0, 0, 0, 0.4);
      --btn-bg: rgba(255, 255, 255, 0.1);
      --btn-hover: rgba(255, 255, 255, 0.2);
    }

    /* æµ…è‰²æ¨¡å¼å˜é‡ */
    [data-theme="light"] {
      --bg-body: #F2F2F7;
      --bg-gradient: linear-gradient(180deg, #FFFFFF 0%, #F2F2F7 100%);
      --glass-base: rgba(255, 255, 255, 0.75);
      --glass-border: rgba(0, 0, 0, 0.05);
      --input-bg: rgba(0, 0, 0, 0.05);
      --text-primary: #000000;
      --text-secondary: rgba(60, 60, 67, 0.6);
      --accent-color: #007AFF;
      --card-shadow: 0 4px 24px rgba(0, 0, 0, 0.06);
      --btn-bg: rgba(0, 0, 0, 0.05);
      --btn-hover: rgba(0, 0, 0, 0.1);
    }

    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; transition: background-color 0.3s ease, color 0.3s ease; }

    body {
      font-family: 'Inter', -apple-system, sans-serif;
      background: var(--bg-body);
      background-image: var(--bg-gradient);
      background-attachment: fixed;
      color: var(--text-primary);
      min-height: 100vh;
      margin: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    /* é¡¶éƒ¨å¯¼èˆªæ  */
    .navbar {
      width: 100%;
      padding: 20px 24px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      top: 0;
      z-index: 50;
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--glass-border);
    }

    .logo-area {
      display: flex;
      align-items: center;
      gap: 12px;
      font-weight: 700;
      font-size: 18px;
      letter-spacing: -0.5px;
    }

    .app-icon {
      width: 32px;
      height: 32px;
      border-radius: 8px;
      object-fit: cover;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    }

    .theme-toggle {
      background: var(--btn-bg);
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      color: var(--text-primary);
    }

    /* ä¸»å®¹å™¨ */
    .container {
      width: 100%;
      max-width: 680px; /* é™åˆ¶å®½åº¦ï¼Œæ›´åƒ App */
      padding: 40px 20px 100px;
      animation: slideUp 0.6s cubic-bezier(0.2, 0.8, 0.2, 1);
    }

    /* ç»ç’ƒå¡ç‰‡é€šç”¨æ ·å¼ */
    .glass-card {
      background: var(--glass-base);
      backdrop-filter: blur(30px);
      -webkit-backdrop-filter: blur(30px);
      border: 1px solid var(--glass-border);
      border-radius: 24px;
      padding: 28px;
      margin-bottom: 24px;
      box-shadow: var(--card-shadow);
    }

    .section-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 20px;
      font-size: 18px;
      font-weight: 600;
      color: var(--text-primary);
    }
    
    .section-header span { opacity: 0.7; }

    /* è¾“å…¥æ¡†ç»„ */
    .input-group {
      margin-bottom: 16px;
    }

    label {
      display: block;
      font-size: 13px;
      color: var(--text-secondary);
      margin-bottom: 8px;
      margin-left: 4px;
      font-weight: 500;
    }

    input, select {
      width: 100%;
      padding: 14px 16px;
      border-radius: 14px;
      border: none;
      background: var(--input-bg);
      color: var(--text-primary);
      font-size: 16px;
      font-family: inherit;
      outline: none;
    }

    input:focus, select:focus {
      background: rgba(128, 128, 128, 0.15);
      box-shadow: 0 0 0 2px var(--accent-color);
    }

    /* æŒ‰é’® */
    .btn {
      width: 100%;
      padding: 16px;
      border-radius: 14px;
      border: none;
      background: var(--btn-bg);
      color: var(--text-primary);
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.1s;
    }

    .btn:active { transform: scale(0.98); }
    
    .btn.primary { background: var(--accent-color); color: white; }
    .btn.success { background: var(--success-color); color: white; }
    .btn.danger { background: rgba(255, 69, 58, 0.15); color: var(--danger-color); }
    .btn.ghost { background: transparent; color: var(--accent-color); }

    .action-row {
      display: flex;
      gap: 12px;
    }

    /* åŸŸååˆ—è¡¨ */
    .domain-list {
      min-height: 60px;
    }
    
    .domain-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 16px;
      background: var(--input-bg);
      border-radius: 16px;
      margin-bottom: 10px;
    }

    .status-badge {
      font-size: 11px;
      padding: 4px 8px;
      border-radius: 6px;
      font-weight: 700;
      text-transform: uppercase;
      margin-left: 10px;
    }
    .status-active { background: rgba(50, 215, 75, 0.2); color: var(--success-color); }
    .status-pending { background: rgba(255, 159, 10, 0.2); color: #FF9F0A; }

    .delete-btn {
      background: rgba(255, 69, 58, 0.2);
      color: var(--danger-color);
      border: none;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }

    /* æ—¥å¿—ç»ˆç«¯ */
    .terminal {
      background: #1a1a1a;
      color: #00ff00;
      font-family: 'Menlo', monospace;
      padding: 20px;
      border-radius: 18px;
      font-size: 12px;
      line-height: 1.5;
      min-height: 100px;
      white-space: pre-wrap;
      overflow-x: auto;
    }

    /* ç™»å½•ç•Œé¢ */
    .login-overlay {
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      background: var(--bg-body);
      background-image: var(--bg-gradient);
      z-index: 100;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .login-card {
      width: 100%;
      max-width: 380px;
      padding: 40px 32px;
      text-align: center;
    }

    .login-logo {
      width: 80px;
      height: 80px;
      border-radius: 20px;
      margin-bottom: 24px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    }

    /* Toast é€šçŸ¥ */
    .toast-island {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%) translateY(-150%);
      background: rgba(20, 20, 20, 0.9);
      backdrop-filter: blur(20px);
      padding: 12px 24px;
      border-radius: 50px;
      display: flex;
      align-items: center;
      gap: 12px;
      color: white;
      font-size: 14px;
      font-weight: 500;
      z-index: 200;
      opacity: 0;
      transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      box-shadow: 0 10px 25px rgba(0,0,0,0.3);
      border: 1px solid rgba(255,255,255,0.1);
    }
    
    .toast-island.show { transform: translateX(-50%) translateY(0); opacity: 1; }
    .toast-island.success i { color: var(--success-color); }
    .toast-island.error i { color: var(--danger-color); }

    .hidden { display: none !important; }
    
    @keyframes slideUp {
      from { transform: translateY(40px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-10px); }
      75% { transform: translateX(10px); }
    }
    
    .shake { animation: shake 0.4s ease-in-out; }
  </style>
</head>
<body>

  <!-- é¡¶éƒ¨é€šçŸ¥æ  (çµåŠ¨å²›) -->
  <div id="toast" class="toast-island">
    <i id="toastIcon">â—</i>
    <span id="toastMsg">Notification</span>
  </div>

  <!-- ç™»å½•å±‚ -->
  <div id="loginScreen" class="login-overlay">
    <div class="glass-card login-card">
      <img src="https://image.hyeri.us.kg/icon.png" class="login-logo" alt="App Icon">
      <h2 style="margin:0 0 8px; font-size: 24px;">Console Login</h2>
      <p style="color:var(--text-secondary); margin:0 0 30px; font-size:14px;">èº«ä»½éªŒè¯ä»¥ç»§ç»­</p>
      
      <input type="password" id="loginPassword" placeholder="è¾“å…¥è®¿é—®å¯†ç " style="text-align:center; margin-bottom: 20px; padding: 16px;">
      <button class="btn primary" id="loginBtn">è§£ é”</button>
      <div id="errorMsg" style="color:var(--danger-color); font-size:13px; margin-top:15px; opacity:0;">å¯†ç é”™è¯¯</div>
    </div>
  </div>

  <!-- ä¸»ç•Œé¢ -->
  <div id="mainScreen" class="hidden">
    <!-- å¯¼èˆªæ  -->
    <nav class="navbar">
      <div class="logo-area">
        <img src="https://image.hyeri.us.kg/icon.png" class="app-icon">
        <span>Pages Console</span>
      </div>
      <button class="theme-toggle" id="themeToggle">â˜€ï¸</button>
    </nav>

    <div class="container">
      
      <!-- æ¨¡å— 1: API é…ç½® -->
      <div class="glass-card">
        <div class="section-header">
          <span>âš™ï¸</span> æ ¸å¿ƒé…ç½®
        </div>
        <div class="input-group">
          <label>ACCOUNT ID</label>
          <input id="accountId" placeholder="Cloudflare Account ID" />
        </div>
        <div class="input-group">
          <label>PAGES API TOKEN</label>
          <input id="pagesToken" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" />
        </div>
        <div class="input-group">
          <label>ZONE API TOKEN</label>
          <input id="zoneToken" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" />
        </div>
        <div class="action-row">
          <button class="btn" id="loadConfigBtn">è¯»å–</button>
          <button class="btn primary" id="saveConfigBtn">ä¿å­˜é…ç½®</button>
        </div>
      </div>

      <!-- æ¨¡å— 2: é¡¹ç›®ç®¡ç† -->
      <div class="glass-card">
        <div class="section-header">
          <span>ğŸ“¦</span> é¡¹ç›®ç©ºé—´
        </div>
        <div class="action-row" style="margin-bottom:16px;">
          <select id="projectSelect">
            <option value="">é€‰æ‹© Pages é¡¹ç›®...</option>
          </select>
          <button class="btn" id="loadProjectsBtn" style="width: auto; padding: 0 24px;">åŠ è½½</button>
        </div>
        <button class="btn ghost" id="refreshDomainsBtn" style="font-size:14px;">åˆ·æ–°åŸŸååˆ—è¡¨</button>
      </div>

      <!-- æ¨¡å— 3: åŸŸååˆ—è¡¨ -->
      <div class="glass-card">
        <div class="section-header">
          <span>ğŸŒ</span> åŸŸåç»‘å®š
        </div>
        
        <div id="domainList" class="domain-list">
          <!-- åŠ¨æ€å†…å®¹ -->
          <div style="text-align:center; padding:20px; color:var(--text-secondary); font-size:14px;">
            æš‚æ— åŸŸåæ•°æ®
          </div>
        </div>

        <hr style="border:0; height:1px; background:var(--glass-border); margin:20px 0;">

        <div class="input-group">
          <label>æ–°å¢åŸŸå (è‡ªåŠ¨ DNS)</label>
          <div class="action-row">
            <input id="addDomainInput" placeholder="ä¾‹å¦‚: sub.example.com" />
            <button class="btn success" id="addDomainBtn" style="width:100px;">æ·»åŠ </button>
          </div>
        </div>

        <div class="input-group">
          <label style="color:var(--danger-color);">ç§»é™¤åŸŸå</label>
          <div class="action-row">
            <input id="removeDomainInput" placeholder="è¾“å…¥è¦åˆ é™¤çš„åŸŸå" />
            <button class="btn danger" id="removeDomainBtn" style="width:100px;">åˆ é™¤</button>
          </div>
        </div>
      </div>

      <!-- æ¨¡å— 4: æ—¥å¿— -->
      <div class="glass-card">
        <div class="section-header">
          <span>ğŸ“¡</span> è¿è¡Œæ—¥å¿—
        </div>
        <div id="output" class="terminal">System Ready...</div>
      </div>

    </div>
  </div>

  <script>
    // ä¸»é¢˜åˆ‡æ¢é€»è¾‘
    const themeToggle = document.getElementById('themeToggle');
    const htmlEl = document.documentElement;
    
    themeToggle.addEventListener('click', () => {
      const current = htmlEl.getAttribute('data-theme');
      const next = current === 'dark' ? 'light' : 'dark';
      htmlEl.setAttribute('data-theme', next);
      themeToggle.textContent = next === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™';
    });

    // Toast é€šçŸ¥å‡½æ•° (æ›¿ä»£ alert)
    const toastEl = document.getElementById('toast');
    const toastIcon = document.getElementById('toastIcon');
    const toastMsg = document.getElementById('toastMsg');
    let toastTimer;

    function showToast(msg, type = 'info') {
      if(toastTimer) clearTimeout(toastTimer);
      toastMsg.textContent = msg;
      
      if(type === 'success') {
        toastIcon.textContent = 'âœ“';
        toastEl.className = 'toast-island success show';
      } else if (type === 'error') {
        toastIcon.textContent = 'âœ•';
        toastEl.className = 'toast-island error show';
      } else {
        toastIcon.textContent = 'â„¹';
        toastEl.className = 'toast-island show';
      }

      toastTimer = setTimeout(() => {
        toastEl.classList.remove('show');
      }, 3000);
    }

    // --- ä»¥ä¸‹ä¸ºä¿æŒä¸å˜çš„æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼Œä»…æ›¿æ¢ UI äº¤äº’éƒ¨åˆ† ---

    // ç™»å½•é€»è¾‘
    const loginScreen=document.getElementById('loginScreen');
    const mainScreen=document.getElementById('mainScreen');
    const loginPassword=document.getElementById('loginPassword');
    const loginBtn=document.getElementById('loginBtn');
    const errorMsg=document.getElementById('errorMsg');

    async function checkLogin(){
      const password=loginPassword.value.trim();
      if(!password){
        loginPassword.focus();
        return;
      }

      try{
        const resp=await fetch('/api/auth',{
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body:JSON.stringify({password})
        });
        const data=await resp.json();
        
        if(data.success){
          sessionStorage.setItem('authenticated','true');
          showMainScreen();
        }else{
          showLoginError();
        }
      }catch(e){
        showLoginError();
      }
    }

    function showLoginError(){
      errorMsg.style.opacity = '1';
      const card = document.querySelector('.login-card');
      card.classList.remove('shake');
      void card.offsetWidth; // trigger reflow
      card.classList.add('shake');
    }

    function showMainScreen(){
      // ä½¿ç”¨æ·¡å‡ºæ·¡å…¥æ•ˆæœ
      loginScreen.style.opacity = '0';
      setTimeout(() => {
        loginScreen.classList.add('hidden');
        mainScreen.classList.remove('hidden');
        loadConfig();
      }, 300);
    }

    loginBtn.addEventListener('click',checkLogin);
    loginPassword.addEventListener('keypress',e=>{
      if(e.key==='Enter')checkLogin();
    });

    if(sessionStorage.getItem('authenticated')==='true'){
      loginScreen.classList.add('hidden');
      mainScreen.classList.remove('hidden');
      loadConfig();
    }

    // ä¸šåŠ¡é€»è¾‘å˜é‡
    const accountId=document.getElementById('accountId');
    const pagesToken=document.getElementById('pagesToken');
    const zoneToken=document.getElementById('zoneToken');
    const projectSelect=document.getElementById('projectSelect');
    const loadProjectsBtn=document.getElementById('loadProjectsBtn');
    const domainList=document.getElementById('domainList');
    const addDomainInput=document.getElementById('addDomainInput');
    const addDomainBtn=document.getElementById('addDomainBtn');
    const removeDomainInput=document.getElementById('removeDomainInput');
    const removeDomainBtn=document.getElementById('removeDomainBtn');
    const refreshDomainsBtn=document.getElementById('refreshDomainsBtn');
    const saveConfigBtn=document.getElementById('saveConfigBtn');
    const loadConfigBtn=document.getElementById('loadConfigBtn');
    const output=document.getElementById('output');

    async function apiCall(path,method='GET',body=null){
      output.textContent='> Requesting...';
      try{
        const resp=await fetch(path,{
          method,
          headers:{
            'Content-Type':'application/json',
            'X-Account-Id':accountId.value.trim(),
            'X-Pages-Token':pagesToken.value.trim(),
            'X-Zone-Token':zoneToken.value.trim()
          },
          body:body?JSON.stringify(body):null
        });
        const data=await resp.json().catch(()=>({error:'æ— æ•ˆå“åº”'}));
        output.textContent=JSON.stringify(data,null,2);
        return{ok:resp.ok,data};
      }catch(e){
        output.textContent='Error: '+e.message;
        return{ok:false,data:null};
      }
    }

    async function saveConfig(){
      const config={
        accountId:accountId.value.trim(),
        pagesToken:pagesToken.value.trim(),
        zoneToken:zoneToken.value.trim()
      };
      if(!config.accountId||!config.pagesToken||!config.zoneToken){
        showToast('è¯·å¡«å†™å®Œæ•´çš„é…ç½®ä¿¡æ¯', 'error');
        return;
      }
      const res=await fetch('/api/config',{
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body:JSON.stringify(config)
      });
      const data=await res.json();
      if(data.success){
        showToast('é…ç½®å·²å®‰å…¨ä¿å­˜', 'success');
      }else{
        showToast('é…ç½®ä¿å­˜å¤±è´¥', 'error');
      }
    }

    async function loadConfig(){
      const res=await fetch('/api/config');
      const data=await res.json();
      if(data.success&&data.config){
        accountId.value=data.config.accountId||'';
        pagesToken.value=data.config.pagesToken||'';
        zoneToken.value=data.config.zoneToken||'';
        output.textContent='> é…ç½®åŠ è½½å®Œæ¯•';
      }else{
        output.textContent='> æœªæ£€æµ‹åˆ°äº‘ç«¯é…ç½®';
      }
    }

    async function loadProjects(){
      const acc=accountId.value.trim();
      if(!acc||!pagesToken.value.trim()) {
        showToast('è¯·å…ˆå®Œå–„ API é…ç½®', 'error');
        return;
      }
      const res=await apiCall(`/api/accounts/${encodeURIComponent(acc)}/projects`);
      if(res.ok&&res.data.success){
        const projects=res.data.result||[];
        projectSelect.innerHTML=projects.map(p=>`<option value="${p.name}">${p.name}</option>`).join('');
        if(projects.length>0){
          projectSelect.value=projects[0].name;
          await loadDomains();
        }
      }
    }

    async function loadDomains(){
      const acc=accountId.value.trim();
      const proj=projectSelect.value;
      if(!acc||!proj)return;
      const res=await apiCall(`/api/accounts/${encodeURIComponent(acc)}/projects/${encodeURIComponent(proj)}/domains`);
      domainList.innerHTML='';
      if(res.ok&&res.data.success){
        const domains=res.data.result||[];
        if(domains.length===0){
          domainList.innerHTML='<div style="text-align:center; padding:20px; color:var(--text-secondary);">æš‚æ— ç»‘å®šåŸŸå</div>';
        }else{
          domains.forEach(d=>{
            const isAct = d.status === 'active';
            const statusClass = isAct ? 'status-active' : 'status-pending';
            const statusText = isAct ? 'Active' : 'Verify';
            
            const item = document.createElement('div');
            item.className = 'domain-item';
            item.innerHTML = `
              <div style="display:flex;align-items:center;">
                <span style="font-weight:500;">${d.name}</span>
                <span class="status-badge ${statusClass}">${statusText}</span>
              </div>
              <button class="delete-btn" onclick="confirmAndRemove('${encodeURIComponent(d.name)}')">âœ•</button>
            `;
            domainList.appendChild(item);
          });
        }
      }
    }

    window.confirmAndRemove=async function(domainEncoded){
      const domain=decodeURIComponent(domainEncoded);
      // ä¿æŒåŸæœ‰çš„ confirm é€»è¾‘ï¼Œä¹Ÿå¯ä»¥æ”¹æˆè‡ªå®šä¹‰æ¨¡æ€æ¡†ï¼Œä½†ä¸ºäº†ä¿ç•™é€»è¾‘ç®€å•æ€§è¿™é‡Œç”¨åŸç”Ÿ confirm
      if(!confirm(`âš ï¸ ç¡®å®šè¦æ–­å¼€åŸŸå ${domain} å—ï¼Ÿ`))return;
      
      const acc=accountId.value.trim();
      const proj=projectSelect.value;
      const res=await apiCall(`/api/accounts/${encodeURIComponent(acc)}/projects/${encodeURIComponent(proj)}/domains/${domain}`,'DELETE');
      if(res.ok&&res.data.success){
        await loadDomains();
        showToast('åŸŸåå·²åˆ é™¤', 'success');
      } else {
        showToast('åˆ é™¤å¤±è´¥', 'error');
      }
    };

    addDomainBtn.addEventListener('click',async()=>{
      const acc=accountId.value.trim();
      const proj=projectSelect.value;
      const domain=addDomainInput.value.trim();
      if(!acc||!proj||!domain||!pagesToken.value.trim()||!zoneToken.value.trim()){
        showToast('è¯·æ£€æŸ¥è¾“å…¥é¡¹å’Œé…ç½®', 'error');
        return;
      }
      const res=await apiCall(`/api/accounts/${encodeURIComponent(acc)}/projects/${encodeURIComponent(proj)}/domains`,'POST',{name:domain});
      if(res.ok&&res.data.success){
        addDomainInput.value='';
        await loadDomains();
        const msg = res.data.dns_created ? 'åŸŸåç»‘å®š & DNS è§£ææˆåŠŸ' : 'åŸŸåç»‘å®šæˆåŠŸ';
        showToast(msg, 'success');
      } else {
        showToast('æ“ä½œå¤±è´¥ï¼Œè¯·æŸ¥çœ‹æ—¥å¿—', 'error');
      }
    });

    removeDomainBtn.addEventListener('click',async()=>{
      const acc=accountId.value.trim();
      const proj=projectSelect.value;
      const domain=removeDomainInput.value.trim();
      if(!acc||!proj||!domain) {
        showToast('è¯·è¾“å…¥è¦åˆ é™¤çš„åŸŸå', 'error');
        return;
      }
      const res=await apiCall(`/api/accounts/${encodeURIComponent(acc)}/projects/${encodeURIComponent(proj)}/domains/${domain}`,'DELETE');
      if(res.ok&&res.data.success){
        removeDomainInput.value='';
        await loadDomains();
        showToast('åŸŸååˆ é™¤æˆåŠŸ', 'success');
      } else {
        showToast('åˆ é™¤å¤±è´¥', 'error');
      }
    });

    refreshDomainsBtn.addEventListener('click', () => {
      loadDomains();
      showToast('åˆ—è¡¨å·²åˆ·æ–°');
    });
    loadProjectsBtn.addEventListener('click',loadProjects);
    projectSelect.addEventListener('change',loadDomains);
    saveConfigBtn.addEventListener('click',saveConfig);
    loadConfigBtn.addEventListener('click',loadConfig);
  </script>
</body>
</html>
